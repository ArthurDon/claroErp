{"ast":null,"code":"import _regeneratorRuntime from \"/home/arthur.donato/Documentos/frontend/claro-erp-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/arthur.donato/Documentos/frontend/claro-erp-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/arthur.donato/Documentos/frontend/claro-erp-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/arthur.donato/Documentos/frontend/claro-erp-frontend/src/pages/Dashboard/index.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport queryString from 'query-string';\nimport Layout from '../../layout/Internal';\nimport { CardEGestor, CardUserData, CardContributors, CardRegisterContributors } from '../../components/Containers';\nimport { AlertsErrors, Loader } from '../../components/Presentations';\nimport { getPlans, sendExternalToken } from '../../services';\nimport { validateToken } from '../../utils';\nimport FAQ from './faq.json';\n\nvar Dashboard = function Dashboard() {\n  /**\n   * Hooks\n   */\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      tabs = _useState2[0],\n      setTabs = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMessage = _useState4[0],\n      setErrorMessage = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loader = _useState6[0],\n      setLoader = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      footer = _useState8[0],\n      setFooter = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      productsData = _useState10[0],\n      setProductsData = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      usersData = _useState12[0],\n      setUsersData = _useState12[1];\n  /**\n   * Function Get Plans\n   */\n\n\n  var getProducts = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var getPlan;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getPlans();\n\n            case 2:\n              getPlan = _context.sent;\n\n              if (getPlan.status) {\n                _context.next = 7;\n                break;\n              }\n\n              setLoader(false);\n              setProductsData([]);\n              return _context.abrupt(\"return\");\n\n            case 7:\n              setLoader(false);\n              setProductsData(getPlan.subscriptions);\n              setUsersData(getPlan.user);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getProducts() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  /**\n   * Function On Click Button Card\n   * @param {obj} event\n   */\n\n\n  var handleClickButtonCard = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event, code) {\n      var sendExternalTokenResponse;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              event.preventDefault();\n              setLoader(true);\n              _context2.next = 4;\n              return sendExternalToken(code);\n\n            case 4:\n              sendExternalTokenResponse = _context2.sent;\n\n              if (sendExternalTokenResponse.status) {\n                _context2.next = 9;\n                break;\n              }\n\n              setLoader(false);\n              setErrorMessage(sendExternalTokenResponse.message);\n              return _context2.abrupt(\"return\");\n\n            case 9:\n              setTimeout(function () {\n                setLoader(false);\n                window.open(sendExternalTokenResponse.accessUrl, '_blank');\n              }, 1000);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleClickButtonCard(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  /**\n   * Function Render Products\n   */\n\n\n  var renderProducts = function renderProducts() {\n    return productsData.map(function (response) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"product-card\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardEGestor, {\n        namePlan: response.product_name,\n        onClickButtonCard: function onClickButtonCard(event) {\n          return handleClickButtonCard(event, response.code);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }\n      }));\n    });\n  };\n  /**\n   * Function Render Workplace\n   */\n\n\n  var renderWorkPlace = function renderWorkPlace() {\n    return productsData.map(function (response) {\n      return /*#__PURE__*/React.createElement(\"section\", {\n        className: \"company\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"header\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"subtitle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }\n      }, \"Empresa\"), /*#__PURE__*/React.createElement(\"h1\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }\n      }, response.workPlace.name), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }\n      }, response.product_name)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"collaborator-card\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }\n      }, response.code === 1 && /*#__PURE__*/React.createElement(CardContributors, {\n        code: response.code,\n        phone: usersData.phone,\n        tittleContributors: \"Administrador\",\n        name: validateToken('email'),\n        email: validateToken('email'),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }\n      }), response.workPlace.contributors.map(function (rows) {\n        if (rows.code > 1) {\n          return /*#__PURE__*/React.createElement(CardContributors, {\n            tittleContributors: \"Colaborador\",\n            phone: usersData.phone,\n            code: rows.code,\n            name: rows.name,\n            email: rows.email,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 17\n            }\n          });\n        }\n\n        return '';\n      }), /*#__PURE__*/React.createElement(CardRegisterContributors, {\n        workPlaceName: response.workPlace.name,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }\n      })));\n    });\n  };\n  /**\n   * Function On Click Button Select Tabs\n   * @param {int} index\n   */\n\n\n  var onSelectTabs = function onSelectTabs(index) {\n    setTabs(index);\n    setFooter(false);\n    productsData.map(function (response) {\n      if (response.code === 1 && index === 2) {\n        setFooter(true);\n      }\n\n      if (response.code > 1 && index === 1) {\n        setFooter(true);\n      }\n\n      return '';\n    });\n  };\n  /**\n   * Function Render Content\n   */\n\n\n  var renderHelp = function renderHelp() {\n    return FAQ.map(function (response) {\n      return /*#__PURE__*/React.createElement(\"details\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"summary\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }\n      }, response.question), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"_content\",\n        style: {\n          whiteSpace: 'pre-line'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }\n      }, response.answer)));\n    });\n  };\n  /**\n   * Function Use Effect\n   */\n\n\n  useEffect(function () {\n    var url = queryString.parse(window.location.search);\n\n    if (url.tabList) {\n      setTabs(parseInt(url.tabList, 10));\n    }\n\n    getProducts();\n    setErrorMessage('');\n  }, []);\n\n  if (loader) {\n    return /*#__PURE__*/React.createElement(Loader, {\n      display: loader,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    displayFooter: footer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"main\", {\n    className: \"main\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"section-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"center-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }, \"Minha Conta\")))), /*#__PURE__*/React.createElement(\"section\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"center-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    selectedIndex: tabs,\n    onSelect: function onSelect(index) {\n      return onSelectTabs(index);\n    },\n    className: \"tabs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TabList, {\n    className: \"tabs-nav\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Tab, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, \"Meus Produtos\"), productsData.map(function (response) {\n    if (response.code === 1) {\n      return /*#__PURE__*/React.createElement(Tab, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 28\n        }\n      }, \"Colaboradores\");\n    }\n\n    return '';\n  }), /*#__PURE__*/React.createElement(Tab, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, \"Perguntas e Respostas\"), /*#__PURE__*/React.createElement(Tab, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, \"Meus Dados\")), /*#__PURE__*/React.createElement(TabPanel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 15\n    }\n  }, renderProducts(), errorMessage !== '' && /*#__PURE__*/React.createElement(AlertsErrors, {\n    message: errorMessage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 41\n    }\n  })), productsData.map(function (response) {\n    if (response.code === 1) {\n      return /*#__PURE__*/React.createElement(TabPanel, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 26\n        }\n      }, renderWorkPlace());\n    }\n\n    return '';\n  }), /*#__PURE__*/React.createElement(TabPanel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 15\n    }\n  }, renderHelp()), /*#__PURE__*/React.createElement(TabPanel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CardUserData, {\n    userName: usersData.name || '',\n    email: usersData.email || '',\n    phone: usersData.phone || '',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  }))))))));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["/home/arthur.donato/Documentos/frontend/claro-erp-frontend/src/pages/Dashboard/index.js"],"names":["React","useEffect","useState","Tab","Tabs","TabList","TabPanel","queryString","Layout","CardEGestor","CardUserData","CardContributors","CardRegisterContributors","AlertsErrors","Loader","getPlans","sendExternalToken","validateToken","FAQ","Dashboard","tabs","setTabs","errorMessage","setErrorMessage","loader","setLoader","footer","setFooter","productsData","setProductsData","usersData","setUsersData","getProducts","getPlan","status","subscriptions","user","handleClickButtonCard","event","code","preventDefault","sendExternalTokenResponse","message","setTimeout","window","open","accessUrl","renderProducts","map","response","product_name","renderWorkPlace","workPlace","name","phone","contributors","rows","email","onSelectTabs","index","renderHelp","question","whiteSpace","answer","url","parse","location","search","tabList","parseInt"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport queryString from 'query-string';\nimport Layout from '../../layout/Internal';\nimport {\n  CardEGestor,\n  CardUserData,\n  CardContributors,\n  CardRegisterContributors,\n} from '../../components/Containers';\n\nimport { AlertsErrors, Loader } from '../../components/Presentations';\n\nimport { getPlans, sendExternalToken } from '../../services';\nimport { validateToken } from '../../utils';\nimport FAQ from './faq.json';\n\nconst Dashboard = () => {\n  /**\n   * Hooks\n   */\n  const [tabs, setTabs] = useState(0);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [loader, setLoader] = useState(true);\n  const [footer, setFooter] = useState(false);\n  const [productsData, setProductsData] = useState([]);\n  const [usersData, setUsersData] = useState([]);\n\n  /**\n   * Function Get Plans\n   */\n  const getProducts = async () => {\n    const getPlan = await getPlans();\n\n    if (!getPlan.status) {\n      setLoader(false);\n      setProductsData([]);\n      return;\n    }\n\n    setLoader(false);\n    setProductsData(getPlan.subscriptions);\n    setUsersData(getPlan.user);\n  };\n\n  /**\n   * Function On Click Button Card\n   * @param {obj} event\n   */\n  const handleClickButtonCard = async (event, code) => {\n    event.preventDefault();\n    setLoader(true);\n\n    const sendExternalTokenResponse = await sendExternalToken(code);\n\n    if (!sendExternalTokenResponse.status) {\n      setLoader(false);\n      setErrorMessage(sendExternalTokenResponse.message);\n      return;\n    }\n\n    setTimeout(() => {\n      setLoader(false);\n      window.open(sendExternalTokenResponse.accessUrl, '_blank');\n    }, 1000);\n  };\n\n  /**\n   * Function Render Products\n   */\n  const renderProducts = () =>\n    productsData.map((response) => (\n      <div className=\"product-card\">\n        <CardEGestor\n          namePlan={response.product_name}\n          onClickButtonCard={(event) =>\n            handleClickButtonCard(event, response.code)\n          }\n        />\n      </div>\n    ));\n\n  /**\n   * Function Render Workplace\n   */\n  const renderWorkPlace = () =>\n    productsData.map((response) => (\n      <section className=\"company\">\n        <header>\n          <span className=\"subtitle\">Empresa</span>\n          <h1>{response.workPlace.name}</h1>\n          <h2>{response.product_name}</h2>\n        </header>\n        <div className=\"collaborator-card\">\n          {response.code === 1 && (\n            <CardContributors\n              code={response.code}\n              phone={usersData.phone}\n              tittleContributors=\"Administrador\"\n              name={validateToken('email')}\n              email={validateToken('email')}\n            />\n          )}\n\n          {response.workPlace.contributors.map((rows) => {\n            if (rows.code > 1) {\n              return (\n                <CardContributors\n                  tittleContributors=\"Colaborador\"\n                  phone={usersData.phone}\n                  code={rows.code}\n                  name={rows.name}\n                  email={rows.email}\n                />\n              );\n            }\n            return '';\n          })}\n\n          <CardRegisterContributors workPlaceName={response.workPlace.name} />\n        </div>\n      </section>\n    ));\n\n  /**\n   * Function On Click Button Select Tabs\n   * @param {int} index\n   */\n  const onSelectTabs = (index) => {\n    setTabs(index);\n    setFooter(false);\n\n    productsData.map((response) => {\n      if (response.code === 1 && index === 2) {\n        setFooter(true);\n      }\n\n      if (response.code > 1 && index === 1) {\n        setFooter(true);\n      }\n      return '';\n    });\n  };\n\n  /**\n   * Function Render Content\n   */\n  const renderHelp = () =>\n    FAQ.map((response) => (\n      <details>\n        <summary>{response.question}</summary>\n        <div className=\"_content\" style={{ whiteSpace: 'pre-line' }}>\n          <p>{response.answer}</p>\n        </div>\n      </details>\n    ));\n\n  /**\n   * Function Use Effect\n   */\n  useEffect(() => {\n    const url = queryString.parse(window.location.search);\n\n    if (url.tabList) {\n      setTabs(parseInt(url.tabList, 10));\n    }\n    getProducts();\n    setErrorMessage('');\n  }, []);\n\n  if (loader) {\n    return <Loader display={loader} />;\n  }\n\n  return (\n    <Layout displayFooter={footer}>\n      <main className=\"main\">\n        <section>\n          <header className=\"section-title\">\n            <div className=\"center-content\">\n              <h1>Minha Conta</h1>\n            </div>\n          </header>\n        </section>\n        <section>\n          <div className=\"center-content\">\n            <Tabs\n              selectedIndex={tabs}\n              onSelect={(index) => onSelectTabs(index)}\n              className=\"tabs\"\n            >\n              <TabList className=\"tabs-nav\">\n                <Tab>Meus Produtos</Tab>\n\n                {productsData.map((response) => {\n                  if (response.code === 1) {\n                    return <Tab>Colaboradores</Tab>;\n                  }\n                  return '';\n                })}\n                {/* <Tab>Colaboradores</Tab> */}\n                <Tab>Perguntas e Respostas</Tab>\n                <Tab>Meus Dados</Tab>\n              </TabList>\n\n              <TabPanel>\n                {renderProducts()}\n                {errorMessage !== '' && <AlertsErrors message={errorMessage} />}\n              </TabPanel>\n              {productsData.map((response) => {\n                if (response.code === 1) {\n                  return <TabPanel>{renderWorkPlace()}</TabPanel>;\n                }\n                return '';\n              })}\n              <TabPanel>{renderHelp()}</TabPanel>\n              <TabPanel>\n                <div className=\"product-card\">\n                  <CardUserData\n                    userName={usersData.name || ''}\n                    email={usersData.email || ''}\n                    phone={usersData.phone || ''}\n                  />\n                </div>\n              </TabPanel>\n            </Tabs>\n          </div>\n        </section>\n      </main>\n    </Layout>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}